<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcoSim â€” Evolutionary Ecosystem Simulator</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="app">

    <!-- Main simulation canvas -->
    <div id="world-container">
      <canvas id="world-canvas"></canvas>
      <!-- Minimap -->
      <canvas id="minimap" width="160" height="90"></canvas>
      <!-- Zoom indicator -->
      <div id="zoom-indicator"></div>
      <!-- Bottom-left info overlay -->
      <div id="info-overlay">
        <span id="overlay-gen">Gen: 0</span>
        <span class="overlay-sep">|</span>
        <span id="overlay-pop">Pop: 0</span>
        <span class="overlay-sep">|</span>
        <span id="overlay-fps">FPS: 0</span>
      </div>
    </div>

    <!-- Right sidebar -->
    <aside id="sidebar">
      <header id="sidebar-header">
        <h1 class="title">EcoSim</h1>
        <p class="subtitle">Evolutionary Ecosystem</p>
      </header>

      <!-- Population Chart -->
      <section class="panel">
        <h2 class="panel-title">Population</h2>
        <div class="chart-wrapper">
          <canvas id="pop-chart" width="300" height="120"></canvas>
        </div>
      </section>

      <!-- Species Chart -->
      <section class="panel">
        <h2 class="panel-title">Species</h2>
        <div class="chart-wrapper">
          <canvas id="species-chart" width="300" height="100"></canvas>
        </div>
      </section>

      <!-- Statistics -->
      <section class="panel">
        <h2 class="panel-title">Statistics</h2>
        <div id="stats-panel">
          <div class="stat-row">
            <span class="stat-label">Generation</span>
            <span class="stat-value" id="stat-generation">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Population</span>
            <span class="stat-value" id="stat-population">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Births</span>
            <span class="stat-value" id="stat-births">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Deaths</span>
            <span class="stat-value" id="stat-deaths">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Avg Energy</span>
            <span class="stat-value" id="stat-avg-energy">0.0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Avg Age</span>
            <span class="stat-value" id="stat-avg-age">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Oldest</span>
            <span class="stat-value" id="stat-oldest">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Most Fit</span>
            <span class="stat-value" id="stat-most-fit">0.0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Food Count</span>
            <span class="stat-value" id="stat-food-count">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">Mutations</span>
            <span class="stat-value" id="stat-mutations">0</span>
          </div>
        </div>
      </section>

      <!-- Controls -->
      <section class="panel">
        <h2 class="panel-title">Controls</h2>
        <div class="control-group">
          <label class="control-label">Simulation Speed</label>
          <div class="button-row">
            <button class="speed-btn" data-speed="0" title="Pause">&#x23F8;</button>
            <button class="speed-btn active" data-speed="1">1x</button>
            <button class="speed-btn" data-speed="2">2x</button>
            <button class="speed-btn" data-speed="5">5x</button>
            <button class="speed-btn" data-speed="10">10x</button>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">Overlays</label>
          <div class="button-row">
            <button class="toggle-btn" data-toggle="trails">Trails</button>
            <button class="toggle-btn" data-toggle="vision">Vision</button>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">Actions</label>
          <div class="button-column">
            <button class="action-btn" id="add-food-btn">Add Food (click)</button>
            <button class="action-btn" id="spawn-btn">Spawn Creature</button>
            <button class="action-btn" id="screenshot-btn">Screenshot (p)</button>
            <button class="action-btn danger" id="reset-btn">Reset</button>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">Camera</label>
          <div class="button-row">
            <button class="action-btn" id="camera-reset-btn">Reset View</button>
            <button class="action-btn" id="camera-follow-btn">Follow (c)</button>
          </div>
          <div style="font-size:9px;color:rgba(255,255,255,0.3);margin-top:4px">Scroll=zoom | Right-drag=pan | WASD=move | Dbl-click=fullscreen</div>
        </div>
      </section>

      <!-- Universes -->
      <section class="panel universe-panel">
        <h2 class="panel-title">Universes</h2>
        <div class="universe-current">
          <span class="universe-label">Active:</span>
          <span class="universe-name" id="universe-name">Unsaved</span>
          <span class="universe-autosave" id="autosave-indicator"></span>
        </div>
        <div id="universe-list" class="universe-list"></div>
        <div class="button-row" style="margin-top:8px">
          <button class="action-btn" id="universe-save-btn">Save</button>
          <button class="action-btn" id="universe-new-btn">New</button>
        </div>
        <div class="button-row" style="margin-top:4px">
          <button class="action-btn" id="download-btn">Export</button>
          <button class="action-btn" id="upload-btn">Import</button>
          <input type="file" id="upload-input" accept=".json" style="display:none">
        </div>
      </section>

      <!-- Settings -->
      <section class="panel settings-panel" id="settings-panel">
        <h2 class="panel-title settings-toggle" id="settings-toggle" style="cursor:pointer">
          Settings <span id="settings-arrow" style="font-size:8px;margin-left:4px">&#9660;</span>
        </h2>
        <div id="settings-content" class="settings-content collapsed">
          <div class="setting-row">
            <label class="setting-label">Mutation Rate</label>
            <input type="range" class="setting-slider" id="slider-mutation-rate" min="0" max="50" value="15" step="1">
            <span class="setting-value" id="val-mutation-rate">15%</span>
          </div>
          <div class="setting-row">
            <label class="setting-label">Mutation Strength</label>
            <input type="range" class="setting-slider" id="slider-mutation-strength" min="5" max="80" value="25" step="1">
            <span class="setting-value" id="val-mutation-strength">0.25</span>
          </div>
          <div class="setting-row">
            <label class="setting-label">Food Spawn Rate</label>
            <input type="range" class="setting-slider" id="slider-food-spawn" min="10" max="200" value="60" step="5">
            <span class="setting-value" id="val-food-spawn">0.60</span>
          </div>
          <div class="setting-row">
            <label class="setting-label">Energy Drain</label>
            <input type="range" class="setting-slider" id="slider-energy-drain" min="2" max="20" value="8" step="1">
            <span class="setting-value" id="val-energy-drain">0.08</span>
          </div>
          <div class="setting-row">
            <label class="setting-label">Day Cycle Length</label>
            <input type="range" class="setting-slider" id="slider-day-cycle" min="500" max="10000" value="3000" step="100">
            <span class="setting-value" id="val-day-cycle">3000</span>
          </div>
        </div>
      </section>

      <!-- Selected Creature Inspector -->
      <section class="panel inspector-panel" id="creature-inspector">
        <h2 class="panel-title">Selected Creature</h2>
        <p class="placeholder-text" id="inspector-placeholder">Click a creature to inspect</p>
        <div class="chart-wrapper">
          <canvas id="brain-canvas" width="300" height="180"></canvas>
        </div>
        <div id="creature-details"></div>
      </section>
    </aside>

  </div>

  <!-- Scripts loaded in dependency order -->
  <script src="js/config.js"></script>
  <script src="js/neural.js"></script>
  <script src="js/creature.js"></script>
  <script src="js/world.js"></script>
  <script src="js/serialization.js"></script>
  <script src="js/renderer.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
